<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Soul Reactor v3.6 ‚Äî The Skunk Spirit Awakening</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">
<style>
html,body{margin:0;height:100%;font-family:Orbitron,system-ui;background:#0b0613;color:#f7f6ff;overflow:hidden;}
header{display:flex;justify-content:center;align-items:center;gap:12px;padding:10px;flex-wrap:wrap}
.pill{background:rgba(124,58,237,.18);border:1px solid rgba(212,175,55,.35);border-radius:999px;padding:6px 12px}
.btn{background:linear-gradient(90deg,#d4af37,#7c3aed);border:none;border-radius:12px;padding:8px 14px;color:#fff;font-weight:700;cursor:pointer}
.btn.outline{background:transparent;border:1px solid #d4af37;color:#d4af37}
.xp-wrap{width:90%;margin:4px auto 0}
.xp{height:20px;border-radius:999px;overflow:hidden;position:relative;background:rgba(20,12,36,.55)}
.xp-fill{height:100%;width:0;background:linear-gradient(90deg,#d4af37,#7c3aed);transition:width .4s ease}
.xp-text{position:absolute;width:100%;text-align:center;font-size:12px;top:0;line-height:20px}
.arena{display:grid;place-items:center;height:calc(100vh - 220px);position:relative}
.orb{width:min(45vh,60vw);height:min(45vh,60vw);max-width:380px;border-radius:50%;background:radial-gradient(circle at 50% 45%,#fff,#d4af37 30%,rgba(124,58,237,.9) 62%,#0b0613 86%);box-shadow:0 0 60px rgba(124,58,237,.6),0 0 140px rgba(212,175,55,.45);cursor:pointer;transition:transform .1s}
.orb:active{transform:scale(.98)}
.controls{display:flex;justify-content:center;gap:10px;margin-bottom:6px}
.orb-row{display:flex;justify-content:center;gap:8px;margin-bottom:4px}
.marble{width:24px;height:24px;border-radius:50%;background:#444;opacity:.4;box-shadow:0 0 4px #000 inset,0 0 6px rgba(255,255,255,.2);transition:all .4s}
.marble.active{opacity:1;background:radial-gradient(circle at 40% 40%, var(--mcol1), var(--mcol2));box-shadow:0 0 10px var(--mcol2)}
#spiritOrb{position:fixed;bottom:90px;left:50%;transform:translateX(-50%);width:48px;height:48px;border-radius:50%;background:radial-gradient(circle,#fff,#7c3aed);box-shadow:0 0 18px #7c3aed;display:none;cursor:pointer;animation:pulse 2s ease-in-out infinite}
@keyframes pulse{0%,100%{transform:translateX(-50%) scale(1)}50%{transform:translateX(-50%) scale(1.1)}}
#creatureModal{position:fixed;inset:0;background:rgba(0,0,0,.8);display:none;justify-content:center;align-items:center;flex-direction:column;z-index:20}
#creatureModal img{max-width:80%;border-radius:20px;box-shadow:0 0 40px rgba(255,255,255,.3)}
#creatureModal button{margin-top:20px}
</style>
</head>
<body>
<header>
 <div class="pill">Souls: <span id="souls">0</span></div>
 <div class="pill">Stage: <span id="stageName">Ember</span></div>
 <button id="soundBtn" class="btn outline">üîá Sound Off</button>
</header>

<div class="xp-wrap">
 <div class="xp"><div class="xp-fill" id="xpFill"></div><div class="xp-text" id="xpText">XP 0 / 100</div></div>
</div>

<main class="arena">
 <div class="orb" id="orb"></div>
</main>

<div class="orb-row" id="orbRow"></div>

<div class="controls">
 <button class="btn" id="openShop">üõçÔ∏è Shop</button>
 <button class="btn outline" id="resetBtn">Reset</button>
</div>

<div id="spiritOrb"></div>

<div id="creatureModal">
 <img src="assets/skunk_spirit.png" alt="Skunk Spirit">
 <p style="margin-top:10px;color:#fff;font-weight:700">Skunk Spirit Unlocked ‚Äî The Guardian of Scent and Soul Balance</p>
 <button class="btn outline" id="closeCreature">Close</button>
</div>

<script>
const orb=document.getElementById('orb'),soulsEl=document.getElementById('souls'),xpFill=document.getElementById('xpFill'),xpText=document.getElementById('xpText');
const soundBtn=document.getElementById('soundBtn'),spiritOrb=document.getElementById('spiritOrb'),creatureModal=document.getElementById('creatureModal');
const closeCreature=document.getElementById('closeCreature');
const orbRow=document.getElementById('orbRow');
let audioCtx,gainNode;let soundOn=false;
let souls=0,xp=0,level=0,requiredXP=100;

function buildMarbles(){
 orbRow.innerHTML="";
 const pastel=[
  ["#f9e6ff","#d4b5ff"],["#e0f7ff","#a4d8ff"],["#fff3e0","#ffd6a4"],
  ["#f1ffe0","#c8ffb0"],["#e0f0ff","#b0caff"],["#ffe0ec","#ffb0d1"],
  ["#e7e0ff","#c0b0ff"],["#e0ffe6","#a4ffc1"],["#fffde0","#fff6a4"],
  ["#e0f9ff","#a4f1ff"],["#ffe0f3","#ffb0d8"],["#e9e0ff","#c2b0ff"]];
 pastel.forEach((c,i)=>{
  const m=document.createElement('div');m.className='marble';m.style.setProperty('--mcol1',c[0]);m.style.setProperty('--mcol2',c[1]);
  orbRow.appendChild(m);
 });
}
buildMarbles();
const marbles=document.querySelectorAll('.marble');

function updateUI(){
 soulsEl.textContent=Math.floor(souls);
 const prog=(xp/requiredXP)*100;xpFill.style.width=prog+'%';xpText.textContent=`XP ${Math.floor(xp)} / ${requiredXP}`;
 marbles.forEach((m,i)=>m.classList.toggle('active',i<level));
 if(level>=12){spiritOrb.style.display='block';}
}

function playChime(){
 if(!soundOn)return;
 if(!audioCtx){audioCtx=new(window.AudioContext||window.webkitAudioContext)();gainNode=audioCtx.createGain();gainNode.connect(audioCtx.destination);gainNode.gain.value=.15;}
 const o=audioCtx.createOscillator();o.type='sine';o.frequency.value=440*Math.pow(2,Math.random()*2-1);
 const g=audioCtx.createGain();g.gain.value=0.001;o.connect(g);g.connect(gainNode);
 const now=audioCtx.currentTime;g.gain.exponentialRampToValueAtTime(0.15,now+.01);g.gain.exponentialRampToValueAtTime(0.0001,now+1.5);
 o.start();o.stop(now+1.6);
}

function sparkle(){
 const div=document.createElement('div');div.style.position='fixed';div.style.width='6px';div.style.height='6px';
 div.style.background='radial-gradient(circle,#fff,#a4d8ff)';div.style.borderRadius='50%';
 div.style.left=Math.random()*100+'vw';div.style.top=Math.random()*100+'vh';div.style.opacity='1';
 div.style.transition='all 1.2s ease-out';document.body.appendChild(div);
 setTimeout(()=>{div.style.transform='translateY(-50px) scale(0)';div.style.opacity='0';},10);
 setTimeout(()=>div.remove(),1200);
}

orb.addEventListener('click',()=>{
 if(soundOn)playChime();
 sparkle();
 souls+=1;xp+=10;
 if(xp>=requiredXP){xp=0;level++;requiredXP=Math.floor(requiredXP*1.25);playChime();}
 updateUI();
});

soundBtn.onclick=()=>{
 soundOn=!soundOn;
 soundBtn.textContent=soundOn?'üîä Sound On':'üîá Sound Off';
 if(soundOn){playChime();}
};

spiritOrb.onclick=()=>{creatureModal.style.display='flex';if(soundOn)playChime();};
closeCreature.onclick=()=>creatureModal.style.display='none';
document.getElementById('resetBtn').onclick=()=>{souls=0;xp=0;level=0;requiredXP=100;spiritOrb.style.display='none';updateUI();};
updateUI();
</script>
</body>
</html>
