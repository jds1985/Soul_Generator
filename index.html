<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>Soul Reactor v4.7 â€” Final Stable</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet" />
<style>
:root{
  --gold:#d4af37;--purple:#7c3aed;
  --bg0:#0b0613;--bg1:#120a21;
  --rainbow:linear-gradient(90deg,#ff0080,#ff8c00,#ffe600,#21d07a,#00b3ff,#7c3aed,#ff0080);
}

html,body{
  height:100%;
  margin:0;
  background:#0b0613;
  color:#fff;
  font-family:Orbitron,sans-serif;
  viewport-fit:cover;
  overscroll-behavior:none;
}
body{
  display:flex;flex-direction:column;
  background:linear-gradient(180deg,var(--bg1),var(--bg0));
  overflow:hidden;
}

/* header */
header{display:flex;justify-content:center;align-items:center;gap:10px;padding:8px;flex-wrap:wrap;}
.pill{padding:6px 10px;border-radius:999px;background:rgba(255,255,255,.12);border:1px solid rgba(255,255,255,.25);}
.btn{background:linear-gradient(90deg,var(--gold),var(--purple));border:none;color:#fff;border-radius:12px;padding:8px 14px;cursor:pointer;font-weight:700;box-shadow:0 4px 14px rgba(0,0,0,.4);}
.btn.out{background:transparent;border:1px solid var(--gold);color:var(--gold);}

/* XP bar */
.xp-wrap{width:90%;margin:8px auto;}
.xp{height:22px;border-radius:999px;overflow:hidden;background:rgba(255,255,255,.15);border:1px solid rgba(255,255,255,.2);position:relative;}
.xp-fill{position:absolute;left:0;top:0;height:100%;width:0;background:linear-gradient(90deg,var(--gold),var(--purple));transition:width .3s;}
.xp-text{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;font-size:12px;color:#fff;}

/* orb */
.arena{flex:1;display:flex;align-items:center;justify-content:center;position:relative;}
.orb{width:min(45vh,320px);aspect-ratio:1;border-radius:50%;
background:radial-gradient(circle at 50% 45%,#fff6e0,#e1c25b 30%,rgba(124,58,237,.85) 65%,rgba(10,5,20,1) 85%);
box-shadow:0 0 60px rgba(124,58,237,.6),0 0 140px rgba(212,175,55,.45);
animation:throb 3s ease-in-out infinite;cursor:pointer;}
@keyframes throb{0%,100%{transform:scale(1)}50%{transform:scale(1.03)}}

/* bottom controls */
.controls{
  display:flex;justify-content:center;gap:10px;padding:10px;
  background:rgba(10,5,20,.9);
  border-top:1px solid rgba(255,255,255,.1);
  position:fixed;
  bottom:0;
  left:0;
  right:0;
  padding-bottom:calc(env(safe-area-inset-bottom) + 12px);
  z-index:5;
}

/* reset button */
#resetBtn{position:fixed;right:12px;bottom:calc(70px + env(safe-area-inset-bottom));padding:8px 12px;border-radius:10px;background:linear-gradient(90deg,#ffd86d,#7c3aed);border:none;color:#fff;cursor:pointer;font-weight:700;z-index:10;}

footer{font-size:11px;opacity:.6;text-align:center;padding:4px;margin-top:auto;}
</style>
</head>
<body>
<header>
  <div class="pill">Souls: <span id="souls">0</span></div>
  <div class="pill">Stage: Ember</div>
  <button id="soundBtn" class="btn out">ðŸ”‡ Sound Off</button>
</header>

<div class="xp-wrap">
  <div class="xp">
    <div id="xpFill" class="xp-fill"></div>
    <div id="xpText" class="xp-text">XP 0 / 100</div>
  </div>
</div>

<div class="arena"><div id="orb" class="orb"></div></div>

<div class="controls">
  <button id="openStore" class="btn">ðŸ›’ Shop</button>
  <button id="openVault" class="btn">ðŸ§¬ Creatures</button>
  <button id="force" class="btn out">âš¡ Force</button>
</div>

<button id="resetBtn">â™» Reset</button>
<footer>v4.7 â€” Final Stable</footer>

<script>
/* ---------- Soul logic ---------- */
let souls=0, perTap=1, auto=0;
const soulsEl=document.getElementById('souls');
const xpFill=document.getElementById('xpFill');
const xpText=document.getElementById('xpText');
function update(){soulsEl.textContent=souls;xpFill.style.width=Math.min(souls,100)+'%';xpText.textContent='XP '+souls+' / 100';}

/* ---------- Sound fix ---------- */
let soundOn=false, unlocked=false;
const soundBtn=document.getElementById('soundBtn');
const tapSound=new Audio("https://cdn.pixabay.com/download/audio/2022/03/15/audio_03b3b0b6b4.mp3?filename=click-124467.mp3");
tapSound.volume=0.45;

function unlockAudioContext(){
  if(!unlocked){
    tapSound.play().then(()=>{tapSound.pause();tapSound.currentTime=0;unlocked=true;});
  }
}
document.addEventListener("pointerdown",unlockAudioContext,{once:true});

soundBtn.onclick=()=>{
  soundOn=!soundOn;
  soundBtn.textContent=soundOn?"ðŸ”Š Sound On":"ðŸ”‡ Sound Off";
  soundBtn.classList.toggle("out",!soundOn);
};

/* ---------- Orb ---------- */
document.getElementById('orb').addEventListener('click',()=>{
  souls+=perTap;update();
  if(soundOn && unlocked){tapSound.currentTime=0;tapSound.play().catch(()=>{});}
});

setInterval(()=>{if(auto>0){souls+=auto;update();}},1000);

document.getElementById('force').onclick=()=>{souls+=50;update();};
document.getElementById('resetBtn').onclick=()=>{souls=0;perTap=1;auto=0;update();};
update();
</script>
</body>
</html>
